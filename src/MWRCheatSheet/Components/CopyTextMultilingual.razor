@inherits ComponentBase
@inject IJSRuntime JSRuntime

<MudStack Row="true">
    <MudSpacer />
    <MudText Align="Align.Center">
        @this.Description
        <br />
        <MudStack Row="true">
            <MudSpacer/>
            <MudStack>
                <MudText>(English)</MudText>
                <MudPaper Class="align-start d-flex" Outlined="false" Elevation="0">
                    <MudTooltip Text="@EnglishTooltip" IsVisible="_showEnglishCopyTooltip" ShowOnClick="true" ShowOnFocus="false" ShowOnHover="false">
                        <MudIconButton OnClick="OnEnglishCopyClick" Icon="@Icons.Material.Filled.ContentCopy" Color="Color.Primary" Disabled="false"/>
                    </MudTooltip>
                    <MudTooltip Text="@EnglishTooltip" IsVisible="_showEnglishShareTooltip" ShowOnClick="true" ShowOnFocus="false" ShowOnHover="false">
                        <MudIconButton OnClick="OnEnglishShareClick" Icon="@Icons.Material.Filled.Share" Color="Color.Primary" Disabled="false"/>
                    </MudTooltip>
                </MudPaper>
            </MudStack>

            <MudStack>
                <MudText>(Español)</MudText>
                <MudPaper Class="align-start d-flex" Outlined="false" Elevation="0">
                    <MudTooltip Text="@SpanishTooltip" IsVisible="_showSpanishCopyTooltip" ShowOnClick="true" ShowOnFocus="false" ShowOnHover="false">
                        <MudIconButton OnClick="OnSpanishCopyClick" Icon="@Icons.Material.Filled.ContentCopy" Color="Color.Primary" Disabled="false"/>
                    </MudTooltip>
                    <MudTooltip Text="@SpanishTooltip" IsVisible="_showSpanishShareTooltip" ShowOnClick="true" ShowOnFocus="false" ShowOnHover="false">
                        <MudIconButton OnClick="OnSpanishShareClick" Icon="@Icons.Material.Filled.Share" Color="Color.Primary" Disabled="false"/>
                    </MudTooltip>
                    <MudSpacer/>
                </MudPaper>
            </MudStack>
            <MudSpacer/>
        </MudStack>
    </MudText>
    <MudSpacer />
</MudStack>

@code {
    private bool _showEnglishCopyTooltip;
    private bool _showEnglishShareTooltip;
    private bool _showSpanishCopyTooltip;
    private bool _showSpanishShareTooltip;

    [Parameter]
    public string Description { get; set; }

    [Parameter]
    public string EnglishTextToCopy { get; set; }

    [Parameter]
    public string EnglishTooltip { get; set; }

    [Parameter]
    public string EnglishImageUrl { get; set; } = GetImageUrl(Image.MoneyChallengeLogo);

    [Parameter]
    public string SpanishTextToCopy { get; set; }

    [Parameter]
    public string SpanishTooltip { get; set; }

    [Parameter]
    public string SpanishImageUrl { get; set; } = GetImageUrl(Image.MoneyChallengeLogo);

    private async Task OnEnglishCopyClick()
    {
        await this.CopyTextToClipboardAsync(this.EnglishTextToCopy);

        _showEnglishCopyTooltip = true;
        base.StateHasChanged();

        await Task.Delay(3 * 1000);

        _showEnglishCopyTooltip = false;
        base.StateHasChanged();
    }

    private async Task OnEnglishShareClick()
    {
        await this.ShareMessageAsync(this.EnglishTextToCopy, this.EnglishImageUrl);

        _showEnglishShareTooltip = true;
        base.StateHasChanged();

        await Task.Delay(3 * 1000);

        _showEnglishShareTooltip = false;
        base.StateHasChanged();
    }

    private async Task OnSpanishCopyClick()
    {
        await this.CopyTextToClipboardAsync(this.SpanishTextToCopy);

        _showSpanishCopyTooltip = true;
        base.StateHasChanged();

        await Task.Delay(3 * 1000);

        _showSpanishCopyTooltip = false;
        base.StateHasChanged();
    }

    private async Task OnSpanishShareClick()
    {
        await this.ShareMessageAsync(this.SpanishTextToCopy, this.SpanishImageUrl);

        _showSpanishShareTooltip = true;
        base.StateHasChanged();

        await Task.Delay(3 * 1000);

        _showSpanishShareTooltip = false;
        base.StateHasChanged();
    }
}

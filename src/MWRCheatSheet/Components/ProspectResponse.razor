@inherits Components.ComponentBase

<BinaryChoice Description="Prospect Response" FirstChoiceLabel="Yes" SecondChoiceLabel="I have a question">
    <FirstChoiceContent>
        <MudText Align="Align.Center">"Great, here's how you take the challenge!"<br />@PointingDownEmoji</MudText>
        <MudStack Row="true">
            <MudSpacer />
            <MudButton OnClick="@(() => _showMembershipEnrollmentDialog = true)" Color="Color.Primary" Size="Size.Small" Variant="Variant.Filled">Tap to Share Link</MudButton>
            <MudSpacer />
        </MudStack>
    </FirstChoiceContent>
    <SecondChoiceContent>
        <MudText Align="Align.Center"> Go to the "Connect" section below <br /> @(PointingDownEmoji)</MudText>
    </SecondChoiceContent>
</BinaryChoice>

<MudDialog @bind-IsVisible="_showMembershipEnrollmentDialog">
    <DialogContent>
        <CopyText Description="Take the 72-Hour Money Challenge!"
                  Url="@Url"
                  Tooltip="Shareable copied!"
                  TextToCopy="@($"Take the 72-Hour Money Challenge!{Environment.NewLine}{ComponentBase.PointingDownEmoji}{Environment.NewLine}{this.Url}")"
                  ImageUrl="@ComponentBase.GetImageUrl(ComponentBase.Image.MoneyChallengeLogo)" />
    </DialogContent>
</MudDialog>

@code {
    private bool _showMembershipEnrollmentDialog;

    [Parameter]
    public string Url { get; set; }

    protected override void OnInitialized()
    {
        this.Url = this.Url ?? Constants.JoinMakeWealthRealEnglish(this.AppState!.UserName!);
    }
}

@page "/shareables"
@inherits Components.ComponentBase
@using Components
@using MWRCheatSheet.Components
@using Append.Blazor.WebShare
@inject IWebShareService WebShareService

<MudText Typo="Typo.h3" GutterBottom="true" Align="Align.Center">Essentials</MudText>
<MudStack>
    <MudSpacer />
    <CopyTextMultilingual Description="@($"72-Hour Money Challenge{Environment.NewLine}(1min 30sec)")"
                          Url="https://www.ms1.megaschool.me/72hr-money-challenge"

                          EnglishTextToCopy="@VideoShareable("72-Hour Money Challenge!", "https://www.ms1.megaschool.me/72hr-money-challenge", new (0, 0, 1, 30))"
                          EnglishTooltip="English link copied!"
                          EnglishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"

                          SpanishTextToCopy="@VideoShareable("72-Hour Money Challenge!", "https://www.ms1.megaschool.me/72hr-money-challenge", new (0, 0, 1, 30))"
                          SpanishTooltip="Español link copied!"
                          SpanishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"/>
    <br/>
    <CopyText Description="@($"EDM 72-Hour Money Challenge{Environment.NewLine}(3 Parts)")"
              Url="https://www.extradigitmovement.com/"
              Tooltip="Shareable copied!"
              TextToCopy="@($"72-Hour Money Challenge!{Environment.NewLine}{PointingDownEmoji}{Environment.NewLine}(2min){Environment.NewLine}https://www.ms1.megaschool.me/72hr-money-challenge{Environment.NewLine}{Environment.NewLine}FAQ - Part 1{Environment.NewLine}{PointingDownEmoji}{Environment.NewLine}(5min){Environment.NewLine}https://www.ms1.megaschool.me/72hour-challenge-walkthrough{Environment.NewLine}{Environment.NewLine}FAQ - Part 2{Environment.NewLine}{PointingDownEmoji}{Environment.NewLine}(8min){Environment.NewLine}https://www.ms1.megaschool.me/72hr-moneychallenge-revenuesharing")"
              ImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
    <br />
    <CopyText Description="@($"72-Hour Money Challenge{Environment.NewLine}Testimonials")"
              Url="https://www.extradigitmovement.com/72hour"
              Tooltip="Shareable copied!"
              TextToCopy="@($"72-Hour Money Challenge Results!{Environment.NewLine}{PointingDownEmoji}{Environment.NewLine}https://www.extradigitmovement.com/72hour")"
              ImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
    <br />
    <CopyTextMultilingual Description="@($"MWR Opportunity{Environment.NewLine}(10min)")"
                          Url="https://www.ms1.megaschool.me/mwr-opportunity-10min"

                          EnglishTextToCopy="@VideoShareable("MWR Opportunity", "https://www.ms1.megaschool.me/mwr-opportunity-10min", new (0, 0, 10, 0))"
                          EnglishTooltip="English link copied!"
                          EnglishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"

                          SpanishTextToCopy="@VideoShareable("MWR Opportunity", "https://www.ms1.megaschool.me/mwr-opportunity-full", new (0, 0, 19,26))"
                          SpanishTooltip="Español link copied!"
                          SpanishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
</MudStack>
<br/>
<br/>
<MudText Typo="Typo.h3" GutterBottom="true" Align="Align.Center">Services</MudText>
<MudStack>
    <CopyTextMultilingual Description="@($"MWR Wealth Membership{Environment.NewLine}(8min)")"
                          Url="https://www.ms1.megaschool.me/mwr-membership"

                          EnglishTextToCopy="https://www.ms1.megaschool.me/mwr-membership"
                          EnglishTooltip="English link copied!"
                          EnglishImageUrl="@GetImageUrl(Image.MembershipLogo)"

                          SpanishTextToCopy="https://www.ms1.megaschool.me/mwr-membership"
                          SpanishTooltip="Español link copied!"
                          SpanishImageUrl="@GetImageUrl(Image.MembershipLogo)"/>
    <br />
    @if (_pageLoaded)
    {
        <CopyTextMultilingual Description="Instant Pay Raise"
                              Url="@InstantPayRaiseUrlEnglish(_username!)"

                              EnglishTextToCopy="@InstantPayRaiseUrlEnglish(_username!)"
                              EnglishTooltip="English link copied!"
                              EnglishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"

                              SpanishTextToCopy="@InstantPayRaiseUrlSpanish(_username!)"
                              SpanishTooltip="Español link copied!"
                              SpanishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
        <br/>
    }
    else
    {
        <MudStack Row="true">
            <MudSpacer/>
            <MudText Align="Align.Center">
                Instant Pay Raise
                <br/>
                <MudProgressCircular Indeterminate="true"/>
            </MudText>
            <MudSpacer/>
        </MudStack>
        <br/>
    }
    <CopyTextMultilingual Description="@($"MWR Credit Restoration{Environment.NewLine}(6min)")"
                          Url="https://www.ms1.megaschool.me/mwr-creditrestoration"

                          EnglishTextToCopy="https://www.ms1.megaschool.me/mwr-creditrestoration"
                          EnglishTooltip="English link copied!"
                          EnglishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"

                          SpanishTextToCopy="https://www.ms1.megaschool.me/mwr-creditrestoration"
                          SpanishTooltip="Español link copied!"
                          SpanishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"/>
    <br/>
    <CopyText Description=@($"MWR Health Share{Environment.NewLine}(5min)")
              Url="https://www.ms1.megaschool.me/mwr-healthshare"
              Tooltip="Link copied!"
              TextToCopy="https://www.ms1.megaschool.me/mwr-healthshare"
              ImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"/>
    <br/>
    <CopyTextMultilingual Description=@($"Keys to Home Ownership{Environment.NewLine}(3min)")
                          Url="https://www.ms1.megaschool.me/keys-to-homeownership"

                          EnglishTextToCopy="https://www.ms1.megaschool.me/keys-to-homeownership"
                          EnglishTooltip="English link copied!"
                          EnglishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"

                          SpanishTextToCopy="https://www.ms1.megaschool.me/keys-to-homeownership"
                          SpanishTooltip="Español link copied!"
                          SpanishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
    <br/>
    <CopyTextMultilingual Description=@($"Trust My Assets{Environment.NewLine}(4min)")
                          Url="https://www.ms1.megaschool.me/trust-my-assets"

                          EnglishTextToCopy="https://www.ms1.megaschool.me/trust-my-assets"
                          EnglishTooltip="English link copied!"
                          EnglishImageUrl="@GetImageUrl(Image.MWRBanner)"

                          SpanishTextToCopy="https://www.ms1.megaschool.me/trust-my-assets"
                          SpanishTooltip="Español link copied!"
                          SpanishImageUrl="@GetImageUrl(Image.MWRBanner)" />
    <br/>
    <CopyText Description=@($"MWR for Real Estate & Mortgage Professionals{Environment.NewLine}(11min)")
                          Url="https://www.ms1.megaschool.me/mwr-for-realestate"
                          TextToCopy="https://www.ms1.megaschool.me/mwr-for-realestate"
                          Tooltip="Link copied!"
                          ImageUrl="@GetImageUrl(Image.MWRBanner)" />
    <br/>
    <CopyText Description=@($"Protect My Assets")
              Url="https://www.ms1.megaschool.me/protect-my-assets"
              Tooltip="Link copied!"
              TextToCopy="https://www.ms1.megaschool.me/protect-my-assets"
              ImageUrl="@GetImageUrl(Image.MWRBanner)"/>
    <br />
    <CopyText Description="Structure My Legacy"
              Url="https://www.ms1.megaschool.me/structure-my-legacy"
              Tooltip="Link copied!"
              TextToCopy="https://www.ms1.megaschool.me/structure-my-legacy"
              ImageUrl="@GetImageUrl(Image.MWRBanner)" />
    <MudSpacer />
</MudStack>
<br />
<br/>
<MudText Typo="Typo.h3" GutterBottom="true" Align="Align.Center">Qualified Marketing Directors</MudText>
<br/>
<MudStack>
    @if (_pageLoaded)
    {
        <CopyText Description="Membership Sign Up"
                  Tooltip="Link copied!"
                  TextToCopy="@MembershipEnrollmentUrl(_username!)"
                  ImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
        <br/>
    }
    else
    {
        <MudStack Row="true">
            <MudSpacer />
            <MudText Align="Align.Center">
                Membership Sign Up
                <br/>
                <MudProgressCircular Indeterminate="true" />
            </MudText>
            <MudSpacer />
        </MudStack>
        <br/>
    }
    @if (_pageLoaded)
    {
        <CopyText Description="Business Sign Up"
                  Tooltip="Link copied!"
                  TextToCopy="@BusinessEnrollmentUrl(_username!)"
                  ImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
        <br />
    }
    else
    {
        <MudStack Row="true">
            <MudSpacer />
            <MudText Align="Align.Center">
                Business Sign Up
                <br />
                <MudProgressCircular Indeterminate="true" />
            </MudText>
            <MudSpacer />
        </MudStack>
        <br />
    }
    @if (_pageLoaded)
    {
        <CopyTextMultilingual Description="My Website"

                              EnglishTextToCopy="@MarketingDirectorUrlEnglish(_username!)"
                              EnglishTooltip="English link copied!"
                              EnglishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)"

                              SpanishTextToCopy="@MarketingDirectorUrlSpanish(_username!)"
                              SpanishTooltip="Español link copied!"
                              SpanishImageUrl="@GetImageUrl(Image.MoneyChallengeLogo)" />
        <br/>
    }
    else
    {
        <MudStack Row="true">
            <MudSpacer />
            <MudText Align="Align.Center">
                My Website
                <br />
                <MudProgressCircular Indeterminate="true" />
            </MudText>
            <MudSpacer />
        </MudStack>
        <br />
    }
    <CopyText Description="MWR Cheat Sheet App"
              Tooltip="Link copied!"
              TextToCopy="https://makewealthreal.github.io/"
              ImageUrl="@GetImageUrl(Image.CheatSheetPreview)"/>
    <br />
    <br />
    <MudText Typo="Typo.h3" GutterBottom="true" Align="Align.Center">Images</MudText>
    <MudText Align="Align.Center">Tap Image to Download</MudText>
    <MudLink Href="images/72hour-money-challenge-logo.png" download>
        <MudImage Fluid="true" Src="images/72hour-money-challenge-logo.png" Alt="MWR 72-Hour Money Challenge" Class="rounded-lg" />
    </MudLink>
    <MudLink Href="images/mwr-banner.png" download>
        <MudImage Fluid="true" Src="images/mwr-banner.png" Alt="MWR Banner" Class="rounded-lg" />
    </MudLink>
    <MudLink Href="images/mwr-membership-logo.jpg" download>
        <MudImage Fluid="true" Src="images/mwr-membership-logo.jpg" Alt="MWR Membership Banner" Class="rounded-lg" />
    </MudLink>
    <MudLink Href="images/mwr-healthshare.png" download>
        <MudImage Fluid="true" Src="images/mwr-healthshare.png" Alt="MWR HealthShare" Class="rounded-lg" />
    </MudLink>
</MudStack>

@code {
    private string? _username;
    private bool _pageLoaded;
    private bool _webSharingAvailable;

    protected override async Task OnInitializedAsync()
    {
        _username = await this.GetUsernameAsync();
        _webSharingAvailable = await WebShareService.IsSupportedAsync();

        _pageLoaded = true;
        this.StateHasChanged();
    }

    private static int MinuteEstimate(TimeSpan duration) => duration.Minutes + (duration.Seconds >= 30 ? 1 : 0);

    private static string VideoShareable(string heading, string videoUrl, TimeSpan videoLength)
        => $"{heading}{Environment.NewLine}{PointingDownEmoji}{Environment.NewLine}({MinuteEstimate(videoLength)}min){Environment.NewLine}{videoUrl}";
}
